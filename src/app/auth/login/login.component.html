<section class="auth-landing" aria-labelledby="authLandingHeading">
  <div class="auth-landing__hero">
    <span class="auth-landing__badge" aria-hidden="true">Gestión comunitaria</span>
    <h1 id="authLandingHeading">Reportes Ciudadanos</h1>
    <p class="auth-landing__intro">
      Centraliza los reportes de la ciudadanía, prioriza las incidencias críticas y comunica los
      avances con total transparencia. Una plataforma pensada para equipos municipales y comunidades
      activas.
    </p>

    <ul class="auth-highlights" aria-label="Beneficios principales">
      <li class="auth-highlights__item" *ngFor="let highlight of highlights" role="listitem">
        <div class="auth-highlights__icon" aria-hidden="true">
          <ng-icon [name]="highlight.icon" size="24"></ng-icon>
        </div>
        <div>
          <h3>{{ highlight.title }}</h3>
          <p>{{ highlight.description }}</p>
        </div>
      </li>
    </ul>

    <div class="auth-stats" aria-label="Resultados recientes">
      <div
        class="auth-stats__item"
        *ngFor="let stat of stats"
        role="group"
        [attr.aria-label]="stat.label"
      >
        <span class="auth-stats__value">{{ stat.value }}</span>
        <span class="auth-stats__label">{{ stat.label }}</span>
      </div>
    </div>
  </div>

  <div class="auth-landing__panel" aria-labelledby="authLoginHeading">
    <div class="auth-panel">
      <header class="auth-panel__header">
        <div class="auth-panel__header-icon" aria-hidden="true">
          <ng-icon name="heroUserSolid" size="32"></ng-icon>
        </div>
        <div>
          <p class="auth-panel__eyebrow">Acceso para personal autorizado</p>
          <h2 id="authLoginHeading">Inicia sesión</h2>
        </div>
      </header>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="form-group">
          <label for="username" class="form-label"
            >Usuario<span class="visually-hidden"> requerido</span></label
          >
          <div class="form-control-wrapper">
            <span class="form-control-icon" aria-hidden="true">
              <ng-icon name="heroUserSolid" size="18"></ng-icon>
            </span>
            <input
              type="text"
              id="username"
              formControlName="username"
              class="form-control"
              [class.is-invalid]="submitted && f['username'].errors"
              placeholder="Ej. coordinador.muni"
              autocomplete="username"
            />
          </div>
          <div *ngIf="submitted && f['username'].errors" class="invalid-feedback d-block">
            <div *ngIf="hasError('username', 'required')">Usuario es requerido</div>
            <div *ngIf="hasError('username', 'minlength')">
              Usuario debe tener al menos 3 caracteres
            </div>
          </div>
        </div>

        <div class="form-group">
          <div class="form-label-group">
            <label for="password" class="form-label"
              >Contraseña<span class="visually-hidden"> requerida</span></label
            >
            <a class="form-label-link" href="mailto:soporte@echarati.gob.pe"
              >¿Olvidaste tu acceso?</a
            >
          </div>
          <div class="form-control-wrapper">
            <span class="form-control-icon" aria-hidden="true">
              <ng-icon name="heroLockClosedSolid" size="18"></ng-icon>
            </span>
            <input
              type="password"
              id="password"
              formControlName="password"
              class="form-control"
              [class.is-invalid]="submitted && f['password'].errors"
              placeholder="Introduce tu contraseña"
              autocomplete="current-password"
            />
          </div>
          <div *ngIf="submitted && f['password'].errors" class="invalid-feedback d-block">
            <div *ngIf="hasError('password', 'required')">Contraseña es requerida</div>
            <div *ngIf="hasError('password', 'minlength')">
              Contraseña debe tener al menos 6 caracteres
            </div>
          </div>
        </div>

        <div class="auth-panel__alert" *ngIf="error" role="alert" aria-live="polite">
          <ng-icon
            name="heroExclamationTriangleSolid"
            size="18"
            class="auth-panel__alert-icon"
            aria-hidden="true"
          ></ng-icon>
          <span>{{ error }}</span>
        </div>

        <button type="submit" class="auth-panel__submit" [disabled]="loading">
          <ng-container *ngIf="loading; else submitLabel">
            <span class="spinner" aria-hidden="true"></span>
            Procesando acceso...
          </ng-container>
          <ng-template #submitLabel>
            Iniciar sesión
            <ng-icon name="heroArrowRightSolid" size="18" aria-hidden="true"></ng-icon>
          </ng-template>
        </button>
      </form>

      <footer class="auth-panel__footer">
        <ng-icon name="heroMapPinSolid" size="18" aria-hidden="true"></ng-icon>
        Municipalidad Distrital de Echarati · Centro de Atención Ciudadana
      </footer>
    </div>
  </div>
</section>
